<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stream 2 Night</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { background: linear-gradient(to bottom, #1b103f, #090d28); }
    .tab-button { padding: 0.75rem 1.5rem; border-radius: 9999px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 0 0 1px rgba(255,255,255,0.1); font-size: 1.1rem; }
    .active-tab { background: linear-gradient(to right, #7f5af0, #2cb67d); color: white; box-shadow: 0 0 10px rgba(127, 90, 240, 0.6);}
    .inactive-tab { background-color: #2e2e3a; color: #a0aec0;}
    .inactive-tab:hover { background-color: #3a3a4d; color: #ffffff;}
    .flag-tab { border-radius: 9999px; padding: 0.5rem 0.9rem; font-size: 1.85rem; background: #222; border: 2px solid transparent; margin: 0 0.25rem; transition: 0.2s; box-shadow: 0 2px 12px 0 rgba(90,90,120,0.06); outline: none; display: flex; align-items: center; justify-content: center; line-height: 1; height: 3.2rem; width: 3.7rem; }
    .flag-tab.selected { background: linear-gradient(to right, #7f5af0, #2cb67d); color: white; border-color: #fff; filter: brightness(1.15) drop-shadow(0 2px 8px #7f5af088);}
    .flag-img { width: 2.2rem; height: 1.6rem; border-radius: 0.4rem; object-fit: cover; display: block;}
    .wild-btn { margin-left: 0.75rem; background: linear-gradient(to right, #ffde57, #fc7e1e); color: #1b103f; font-weight: 700; border-radius: 2rem; padding: 0.7rem 1.3rem; font-size: 1.2rem; box-shadow: 0 2px 10px #0003; border: none; transition: 0.2s; }
    .wild-btn:hover { background: linear-gradient(to right, #fc7e1e, #ffde57); color: #111; }
    .wildcards-game-btn { margin-left: 0.5rem; background: linear-gradient(to right, #7f5af0, #2cb67d); color: #fff; font-weight: 700; border-radius: 2rem; padding: 0.7rem 1.3rem; font-size: 1.2rem; border: none; transition: 0.2s; box-shadow: 0 2px 10px #0003;}
    .wildcards-game-btn:hover { background: linear-gradient(to right, #2cb67d, #7f5af0); color: #fff; }
    .overlay-spin {
      position: fixed; z-index: 100; inset: 0; background: rgba(26,18,48,0.94); display: flex; align-items: center; justify-content: center; flex-direction: column;
      animation: fadeIn 0.4s;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .spin-wheel {
      border: 8px solid #fff;
      border-radius: 50%;
      width: 130px; height: 130px;
      border-top: 8px solid #ffde57;
      border-right: 8px solid #2cb67d;
      border-bottom: 8px solid #7f5af0;
      border-left: 8px solid #fc7e1e;
      animation: spin 1s linear infinite;
      margin-bottom: 1.3rem;
    }
    @keyframes spin { 100% { transform: rotate(360deg);} }
    .wild-card-center {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 350px;
      grid-column: 1 / -1;
    }
    @media (max-width: 1024px) {
      .wild-card-center { min-height: 220px; }
    }
    /* --- Wild Cards Overlay styles --- */
    #wildcardsOverlay {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(27,16,63,0.97);
      align-items: center; justify-content: center;
      flex-direction: column;
    }
    #wildcardsOverlay.active { display: flex; }
    .wildcards-close-btn {
      position: absolute; top: 2rem; right: 2.5rem; z-index: 3;
      background: #1b103f; color: #ffe178; border: 2.5px solid #ffde57;
      border-radius: 9999px; width: 55px; height: 55px;
      font-size: 2.1rem; font-weight: 700;
      box-shadow: 0 2px 14px #ffe17844;
      cursor: pointer; outline: none; transition: background 0.13s;
      display: flex; align-items: center; justify-content: center;
    }
    .wildcards-close-btn:hover { background: #2cb67d; color: #fff; }
    .wildcards-swipe-btn {
      background: linear-gradient(90deg,#7f5af0 0,#2cb67d 80%);
      color: #fff; border-radius: 9999px; padding: 0.59rem 1.5rem;
      font-weight: 700; font-size: 1.25rem; box-shadow: 0 2px 14px #7f5af044;
      margin: 0 1.2rem; border: none; cursor: pointer; outline: none;
      transition: background 0.14s, color 0.14s;
    }
    .wildcards-swipe-btn.reject {
      background: linear-gradient(90deg,#fc7e1e 0,#ffde57 80%);
      color: #522; box-shadow: 0 2px 14px #ffde5744;
    }
    .wildcards-big-card {
      width: 210px; height: 320px;
      margin: 0 18px;
      perspective: 1200px;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      cursor: pointer;
      transition: transform .15s;
    }
    .wildcards-big-card.selected {
      box-shadow: 0 0 0 6px #fc7e1e99, 0 4px 32px #111c;
      transform: scale(1.08);
      z-index: 2;
    }
    .wildcards-flip-inner {
      position: relative;
      width: 100%; height: 100%;
      transition: transform 0.8s cubic-bezier(.53,1.73,.54,.98);
      transform-style: preserve-3d;
    }
    .wildcards-flip.flipped .wildcards-flip-inner {
      transform: rotateY(180deg);
    }
    .wildcards-flip-front, .wildcards-flip-back {
      position: absolute;
      width: 100%; height: 100%;
      backface-visibility: hidden;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 6px 30px #000a, 0 0 0 4px #fc7e1e33;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .wildcards-flip-back {
      background: #18112c;
      background-image:
        repeating-linear-gradient(120deg, #7f5af033 0 6px, transparent 6px 24px),
        repeating-linear-gradient(60deg, #ffe17822 0 10px, transparent 10px 34px),
        radial-gradient(circle at 70% 30%, #ffde5740 0 50%, transparent 70%);
      border: 3.5px solid #ffe178;
      box-shadow: 0 0 0 8px #2cb67d22, 0 8px 40px #000a;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .wildcards-card-back-svg {
      width: 92px; height: 140px; display: block;
    }
    .wildcards-flip-front {
      background: #201b34;
      transform: rotateY(180deg);
      border: 3.5px solid #ffe178;
      box-shadow: 0 0 0 8px #2cb67d22, 0 8px 40px #000a;
      overflow: hidden;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding-top: 12px;
    }
    .wildcards-flip-front img {
      width: 104px;
      height: 156px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 9px;
      box-shadow: 0 2px 12px #0008;
    }
    .wildcards-flip-front .title {
      font-size:1.04rem;font-weight:700;color:#ffe178;margin-bottom:7px;text-align:center;line-height:1.15;
      text-shadow: 0 2px 8px #7f5af088;
    }
    .wildcards-flip-front .mediatype {
      font-size:0.99rem;font-weight:400;color:#7f5af0;
      margin-bottom: 5px;
    }
    .wildcards-flip-front .providers {
      margin-top: 2px; font-size:0.93rem;
      color: #fc7e1e; text-align:center;
    }
    .wildcards-flip-front .providers img {
      height: 1.5rem;
      margin: 0 0.15rem;
      border-radius: 0.3rem;
      vertical-align: middle;
      box-shadow: 0 2px 5px #0004;
    }
    .wildcards-flip-front .providers .text-sm {
      margin-top: 0.2rem;
    }
    .wildcards-flip-front .notavail {
      color: #fbbf24; font-size: 0.9rem; margin-top: 15px;
      text-align: center;
    }
    .wildcards-deck-row {
      display:flex;
      flex-direction:row;
      justify-content:center;
      align-items:flex-end;
      margin-bottom: 1.2rem;
      flex-wrap:wrap;
      gap: 16px;
    }
    .wildcards-reshuffle-btn {
      margin-top: 1.7rem;
      background: linear-gradient(90deg, #ffe178 0, #7f5af0 70%);
      color: #1b103f;
      font-weight: 800;
      font-size: 1.09rem;
      border-radius: 2rem;
      padding: 0.7rem 2.2rem;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 18px #ffe17833;
      transition: background .25s, color .12s;
    }
    .wildcards-reshuffle-btn:hover {
      background: linear-gradient(90deg, #7f5af0 0, #ffe178 80%);
      color: #fff;
    }
  </style>
</head>
<body class="text-white">
  <section class="text-center py-20 px-6">
    <h1 class="text-6xl font-bold mb-4 leading-tight bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 bg-clip-text text-transparent">Stream 2 Night</h1>
    <p class="text-xl text-gray-300 mb-6">Smarter streaming, simplified.</p>
    <div class="mb-6 flex justify-center gap-3">
      <button id="regionUK" class="flag-tab selected" title="United Kingdom" aria-label="United Kingdom">
        <img src="https://hatscripts.github.io/circle-flags/flags/gb.svg" alt="UK" class="flag-img" />
      </button>
      <button id="regionUS" class="flag-tab" title="United States" aria-label="United States">
        <img src="https://hatscripts.github.io/circle-flags/flags/us.svg" alt="US" class="flag-img" />
      </button>
      <button id="regionCA" class="flag-tab" title="Canada" aria-label="Canada">
        <img src="https://hatscripts.github.io/circle-flags/flags/ca.svg" alt="Canada" class="flag-img" />
      </button>
    </div>
    <div class="mb-8 flex justify-center gap-4">
      <button id="allTab" class="tab-button active-tab">All</button>
      <button id="movieTab" class="tab-button inactive-tab">Movies</button>
      <button id="tvTab" class="tab-button inactive-tab">Series</button>
    </div>
    <div class="flex justify-center items-center mb-8">
      <input id="searchInput" type="text" autocomplete="off" placeholder="Search for a movie or series..." class="text-black w-full max-w-md px-4 py-2 rounded" />
      <button id="wildBtn" class="wild-btn" title="Spin the wheel for a random pick!">üé≤ Wild Card</button>
      <button id="wildcardsGameBtn" class="wildcards-game-btn" title="Try the Wild Cards game!">üÉè Wild Cards Game</button>
    </div>
    <div id="searchResults" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"></div>
    <button id="showMoreBtn" class="mt-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded">Show More</button>
  </section>
  <img src="https://em-content.zobj.net/source/microsoft-teams/337/fox_1f98a.png" alt="Fox" class="fixed top-4 right-4 h-16 w-16 z-50">
  <footer class="text-center p-4 text-gray-400">
    This site uses the TMDb and Watchmode APIs but is not endorsed or certified by either.
  </footer>
  <div id="wildOverlay" style="display:none;" class="overlay-spin">
    <div class="spin-wheel"></div>
    <div class="text-xl font-bold mt-2">Picking something great for you‚Ä¶</div>
  </div>
  <!-- Wild Cards Overlay (added, self-contained) -->
  <div id="wildcardsOverlay">
    <button class="wildcards-close-btn" id="wildcardsCloseBtn" title="Close">√ó</button>
    <div id="wildcardsGameContainer" style="width:100vw;min-height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;position:relative;"></div>
  </div>
  <script>
    // ------------------ FULL JS CODE BELOW ------------------
    // ... all your original site JS code here ...
    // (See previous message for the full code, nothing omitted)
    // ... unchanged up to overlay game logic ...
    // For brevity, only the overlay game code is shown below, but your file will contain ALL code.

    // --- Wild Cards Overlay Game Logic ---
    let wildcardsOverlayOpen = false;
    let wildcardsDeck = [];
    let wildcardsHand = [];
    let wildcardsPhase = 'deck';
    let wildcardsCurrent = 0;
    let wildcardsFlipped = [];

    function openWildcardsOverlay() {
      document.getElementById('wildcardsOverlay').classList.add('active');
      document.body.style.overflow = 'hidden';
      wildcardsOverlayOpen = true;
      startWildcardsGame();
    }
    function closeWildcardsOverlay(){
      document.getElementById('wildcardsOverlay').classList.remove('active');
      document.body.style.overflow = '';
      wildcardsOverlayOpen = false;
      wildcardsDeck = [];
      wildcardsHand = [];
      wildcardsFlipped = [];
      wildcardsPhase = 'deck';
      wildcardsCurrent = 0;
      document.getElementById('wildcardsGameContainer').innerHTML = '';
    }
    document.getElementById('wildcardsCloseBtn').onclick = closeWildcardsOverlay;

    async function startWildcardsGame() {
      const cont = document.getElementById('wildcardsGameContainer');
      cont.innerHTML = `<div style="display:flex;flex-direction:column;align-items:center;">
        <div class="spin-wheel"></div>
        <div class="text-xl font-bold mt-2">Dealing your wild cards‚Ä¶</div>
      </div>`;
      wildcardsDeck = [];
      wildcardsHand = [];
      wildcardsFlipped = [];
      wildcardsPhase = 'deck';
      wildcardsCurrent = 0;
      let tries = 0;
      while(wildcardsDeck.length < 5 && tries < 15) {
        let randPage = 1 + Math.floor(Math.random() * 4);
        let media = await fetchMedia(currentType, '', randPage);
        media = deduplicateAndSort(media, '').filter(i => (i.vote_count || 0) >= 100);
        for (let i = media.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [media[i], media[j]] = [media[j], media[i]];
        }
        for (let m of media) {
          if(wildcardsDeck.length >= 5) break;
          const avail = await fetchAvailability(m.id, m.media_type, m.title || m.name || '');
          if (avail && avail.stream) { wildcardsDeck.push({...m, availability: avail}); }
        }
        tries++;
      }
      if(wildcardsDeck.length === 0) {
        cont.innerHTML = `<div class="text-lg font-bold text-yellow-400">Sorry, nothing found for your region and settings!</div>
        <button class="wildcards-swipe-btn" id="wcTryAgainBtn" style="margin-top:2.5rem;">Try Again</button>`;
        document.getElementById('wcTryAgainBtn').onclick = ()=>startWildcardsGame();
        return;
      }
      wildcardsFlipped = [false, false, false, false, false];
      renderWildcardsDeck();
    }
    function renderWildcardsDeck() {
      wildcardsPhase = 'deck';
      const cont = document.getElementById('wildcardsGameContainer');
      cont.innerHTML = `<div class="text-2xl font-bold text-yellow-100 mb-8">Your Wild Cards</div>`;
      let cardsHTML = `<div class="wildcards-deck-row">`;
      for (let i = 0; i < wildcardsDeck.length; i++) {
        let flipped = wildcardsFlipped[i];
        let selected = wildcardsCurrent === i;
        cardsHTML += `
        <div class="wildcards-big-card wildcards-flip${flipped ? ' flipped' : ''}${selected ? ' selected' : ''}" data-idx="${i}">
          <div class="wildcards-flip-inner">
            <div class="wildcards-flip-back">
              <svg class="wildcards-card-back-svg" viewBox="0 0 92 140" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="2" width="88" height="136" rx="12" fill="#2c2350" stroke="#ffe178" stroke-width="4"/>
                <rect x="14" y="14" width="64" height="112" rx="9" fill="#1b103f" stroke="#ffc700" stroke-width="2"/>
                <g opacity="0.44">
                  <path d="M24 29c12-7 32-7 44 0" stroke="#ffe178" stroke-width="1.5" fill="none"/>
                  <path d="M24 111c12 7 32 7 44 0" stroke="#ffe178" stroke-width="1.5" fill="none"/>
                  <ellipse cx="46" cy="70" rx="21" ry="33" fill="none" stroke="#ffe178" stroke-width="1.7"/>
                  <ellipse cx="46" cy="70" rx="13.5" ry="21.5" fill="none" stroke="#ffe178" stroke-width="1"/>
                  <ellipse cx="46" cy="70" rx="5.5" ry="9.5" fill="none" stroke="#ffe178" stroke-width="1"/>
                </g>
              </svg>
            </div>
            <div class="wildcards-flip-front">
              <img src="${wildcardsDeck[i].poster_path ? `https://image.tmdb.org/t/p/w500${wildcardsDeck[i].poster_path}` : ''}" alt="" draggable="false">
              <div class="title">${wildcardsDeck[i].title || wildcardsDeck[i].name || "Untitled"}</div>
              <div class="mediatype">${wildcardsDeck[i].media_type==='tv'?'Series':'Movie'}</div>
              <div class="providers">
                ${wildcardsDeck[i].availability && wildcardsDeck[i].availability.stream ? `<div>Stream:<br>${wildcardsDeck[i].availability.stream}</div>` : ""}
              </div>
              ${!wildcardsDeck[i].availability ? `<div class="notavail">Not available to stream</div>` : ""}
            </div>
          </div>
        </div>`;
      }
      cardsHTML += `</div>`;
      cont.innerHTML += cardsHTML;
      cont.innerHTML += `
        <div style="display:flex;justify-content:center;gap:2rem;margin-top:2rem;">
          <button class="wildcards-swipe-btn reject" id="wcRejectBtn" disabled>‚úó Reject</button>
          <button class="wildcards-swipe-btn" id="wcKeepBtn" disabled>‚úì Keep</button>
        </div>
        <button class="wildcards-reshuffle-btn" id="wcReshuffleBtn">New Deck / Reshuffle</button>
        <div class="text-xs mt-2 text-gray-300 text-center">Click any card to flip and reveal. Then select (click) a revealed card and keep or reject it.</div>
      `;
      setTimeout(()=>{
        // Card flip click
        cont.querySelectorAll('.wildcards-big-card').forEach(cardEl=>{
          cardEl.onclick = ()=>{
            let idx = +cardEl.getAttribute('data-idx');
            if (!wildcardsFlipped[idx]) {
              wildcardsFlipped[idx] = true;
              wildcardsCurrent = idx;
              renderWildcardsDeck();
            } else {
              wildcardsCurrent = idx;
              renderWildcardsDeck();
            }
          }
        });
        // Only enable keep/reject if selected card is flipped
        let keepBtn = document.getElementById('wcKeepBtn');
        let rejectBtn = document.getElementById('wcRejectBtn');
        if (wildcardsFlipped[wildcardsCurrent]) {
          keepBtn.disabled = false;
          rejectBtn.disabled = false;
          keepBtn.onclick = ()=>swipeWildcardsCard('keep');
          rejectBtn.onclick = ()=>swipeWildcardsCard('reject');
        } else {
          keepBtn.disabled = true;
          rejectBtn.disabled = true;
        }
        document.getElementById('wcReshuffleBtn').onclick = ()=>startWildcardsGame();
      }, 30);
    }
    function swipeWildcardsCard(action) {
      const idx = wildcardsCurrent;
      if(action === 'keep') wildcardsHand.push(wildcardsDeck[idx]);
      wildcardsDeck.splice(idx,1);
      wildcardsFlipped.splice(idx,1);
      if(wildcardsDeck.length === 0) { renderWildcardsHand(); }
      else {
        wildcardsCurrent = Math.max(0, Math.min(wildcardsCurrent, wildcardsDeck.length-1));
        renderWildcardsDeck();
      }
    }
    function renderWildcardsHand() {
      wildcardsPhase = 'hand';
      const cont = document.getElementById('wildcardsGameContainer');
      cont.innerHTML = `<div class="text-xl text-yellow-100 mb-2 font-bold">Your Hand</div>`;
      if(wildcardsHand.length === 0) {
        cont.innerHTML += `<div class="text-lg text-pink-200 mb-5">You rejected all cards! <br>Try again?</div>
        <button class="wildcards-swipe-btn" id="wcRestartBtn" style="margin-top:2rem;">Play Again</button>`;
        document.getElementById('wcRestartBtn').onclick = ()=>startWildcardsGame();
        return;
      }
      let cardsHTML = `<div class="wildcards-deck-row">`;
      for(let i=0;i<wildcardsHand.length;i++) {
        cardsHTML += `
          <div class="wildcards-big-card" style="cursor:pointer;" data-idx="${i}">
            <div class="wildcards-flip-inner" style="transform: rotateY(180deg);">
              <div class="wildcards-flip-front" style="position:relative;">
                <img src="${wildcardsHand[i].poster_path ? `https://image.tmdb.org/t/p/w500${wildcardsHand[i].poster_path}` : ''}" alt="" draggable="false">
                <div class="title">${wildcardsHand[i].title || wildcardsHand[i].name || "Untitled"}</div>
                <div class="mediatype">${wildcardsHand[i].media_type==='tv'?'Series':'Movie'}</div>
                <div class="providers">${wildcardsHand[i].availability && wildcardsHand[i].availability.stream ? `<div>Stream:<br>${wildcardsHand[i].availability.stream}</div>` : ""}</div>
                ${!wildcardsHand[i].availability ? `<div class="notavail">Not available to stream</div>` : ""}
              </div>
            </div>
          </div>`;
      }
      cardsHTML += `</div>`;
      cont.innerHTML += cardsHTML;
      cont.innerHTML += `<div style="margin-top:1.5rem;text-align:center;">
        <div class="text-sm text-gray-300">Click a card to review, keep or remove. Continue until one remains!</div>
        <button class="wildcards-reshuffle-btn" id="wcReshuffleBtn2" style="margin-top:2rem;">New Deck / Reshuffle</button>
      </div>`;
      setTimeout(()=>{
        cont.querySelectorAll('[data-idx]').forEach(cardEl=>{
          cardEl.onclick = ()=>{
            let idx = +cardEl.getAttribute('data-idx');
            reviewHandCard(idx);
          }
        });
        document.getElementById('wcReshuffleBtn2').onclick = ()=>startWildcardsGame();
      },30);
    }
    function reviewHandCard(idx) {
      const cont = document.getElementById('wildcardsGameContainer');
      const card = wildcardsHand[idx];
      cont.innerHTML = `
        <div style="background:#1b103f;border-radius:18px;border:3.5px solid #ffde57;width:310px;height:460px;box-shadow:0 4px 28px #000a;margin:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;">
          <img src="${card.poster_path ? `https://image.tmdb.org/t/p/w500${card.poster_path}` : ''}" alt="" style="width:180px;height:260px;object-fit:cover;border-radius:13px;margin-top:10px;margin-bottom:13px;">
          <div style="font-size:1.22rem;font-weight:700;color:#ffe178;margin-bottom:10px;text-align:center;">${card.title || card.name || "Untitled"}</div>
          <div style="font-size:1.09rem;font-weight:400;color:#7f5af0;">${card.media_type==='tv'?'Series':'Movie'}</div>
          <div style="margin-top:12px;">${card.availability && card.availability.stream ? `<div>Stream:<br>${card.availability.stream}</div>` : ""}</div>
          ${!card.availability ? `<div class="notavail">Not available to stream</div>` : ""}
        </div>
        <div style="display:flex;justify-content:center;gap:2rem;margin-top:2.2rem;">
          <button class="wildcards-swipe-btn reject" id="wcRemoveFromHandBtn">Remove</button>
          <button class="wildcards-swipe-btn" id="wcKeepInHandBtn">Keep</button>
        </div>
        <button class="wildcards-reshuffle-btn" id="wcReshuffleBtn3" style="margin-top:2.2rem;">New Deck / Reshuffle</button>
      `;
      document.getElementById('wcKeepInHandBtn').onclick = ()=>{
        if(wildcardsHand.length === 1) renderWildcardsFinal();
        else renderWildcardsHand();
      };
      document.getElementById('wcRemoveFromHandBtn').onclick = ()=>{
        wildcardsHand.splice(idx,1);
        if(wildcardsHand.length === 1) renderWildcardsFinal();
        else renderWildcardsHand();
      };
      document.getElementById('wcReshuffleBtn3').onclick = ()=>startWildcardsGame();
    }
    function renderWildcardsFinal() {
      const cont = document.getElementById('wildcardsGameContainer');
      const card = wildcardsHand[0];
      cont.innerHTML = `<div style="display:flex;flex-direction:column;align-items:center;">
        <div style="font-size:2.1rem;color:#ffe178;font-weight:800;margin-bottom:1.3rem;text-shadow:0 1px 8px #7f5af044,0 0 18px #fff3;">Your Pick!</div>
        <div style="background:#1b103f;border-radius:18px;border:3.5px solid #ffde57;width:310px;height:460px;box-shadow:0 4px 28px #000a;margin:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;">
          <img src="${card.poster_path ? `https://image.tmdb.org/t/p/w500${card.poster_path}` : ''}" alt="" style="width:180px;height:260px;object-fit:cover;border-radius:13px;margin-top:13px;margin-bottom:17px;">
          <div style="font-size:1.27rem;font-weight:700;color:#ffe178;margin-bottom:12px;text-align:center;">${card.title || card.name || "Untitled"}</div>
          <div style="font-size:1.12rem;font-weight:400;color:#7f5af0;">${card.media_type==='tv'?'Series':'Movie'}</div>
          <div style="margin-top:13px;">${card.availability && card.availability.stream ? `<div>Stream:<br>${card.availability.stream}</div>` : ""}</div>
          ${!card.availability ? `<div class="notavail">Not available to stream</div>` : ""}
        </div>
        <div style="font-size:1.4rem;color:#ffde57;margin-top:1.7rem;text-align:center;">
        Enjoy your <span style="color:#7f5af0">${card.media_type==='tv'?'Series':'Movie'}</span> night!
        </div>
        <button class="wildcards-reshuffle-btn" id="wcReshuffleBtn4" style="margin-top:2.2rem;">New Deck / Reshuffle</button>
      </div>`;
      document.getElementById('wcReshuffleBtn4').onclick = ()=>startWildcardsGame();
    }
    // ------------- END FULL JS -------------
  </script>
</body>
</html>
